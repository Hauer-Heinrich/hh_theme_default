"use strict";function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(1<arguments.length&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}}),Array.from||(Array.from=function(){var toStr=Object.prototype.toString,isCallable=function(fn){return"function"==typeof fn||"[object Function]"===toStr.call(fn)},toInteger=function(value){var number=+value;return isNaN(number)?0:0!=number&&isFinite(number)?(0<number?1:-1)*Math.floor(Math.abs(number)):number},maxSafeInteger=Math.pow(2,53)-1,toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};return function(arrayLike){var C=this,items=Object(arrayLike);if(null==arrayLike)throw new TypeError("Array.from requires an array-like object - not null or undefined");var T,mapFn=1<arguments.length?arguments[1]:void void 0;if("undefined"!=typeof mapFn){if(!isCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(T=arguments[2])}for(var kValue,len=toLength(items.length),A=isCallable(C)?Object(new C(len)):Array(len),k=0;k<len;)kValue=items[k],A[k]=mapFn?"undefined"==typeof T?mapFn(kValue,k):mapFn.call(T,kValue,k):kValue,k+=1;return A.length=len,A}}()),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(arr){arr.forEach(function(item){item.hasOwnProperty("append")||Object.defineProperty(item,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var argArr=Array.prototype.slice.call(arguments),docFrag=document.createDocumentFragment();argArr.forEach(function(argItem){var isNode=argItem instanceof Node;docFrag.appendChild(isNode?argItem:document.createTextNode(argItem+""))}),this.appendChild(docFrag)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),function(arr){arr.forEach(function(item){item.hasOwnProperty("prepend")||Object.defineProperty(item,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var argArr=Array.prototype.slice.call(arguments),docFrag=document.createDocumentFragment();argArr.forEach(function(argItem){var isNode=argItem instanceof Node;docFrag.appendChild(isNode?argItem:document.createTextNode(argItem+""))}),this.insertBefore(docFrag,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var IoUtilities=function(){function IoUtilities(){_classCallCheck(this,IoUtilities)}return _createClass(IoUtilities,[{key:"windowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"windowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"width",value:function(element,_width){return"undefined"==typeof _width?element.clientWidth||0:void(element.style.width=Number.isInteger(_width)?_width+"px":_width)}},{key:"height",value:function(element,_height){return"undefined"==typeof _height?element.clientHeight||0:void(element.style.height=Number.isInteger(_height)?_height+"px":_height)}},{key:"heightContent",value:function(element){var elStyle=window.getComputedStyle(element);if("none"==elStyle.display||"0px"==elStyle.height||"0px"==elStyle.maxHeight){var elStyleInline={display:element.style.display,height:element.style.height,maxHeight:element.style.maxHeight};element.style.display="block",element.style.height="auto",element.style.maxHeight="none"}var elementHeight=element.clientHeight||0;return"undefined"!=typeof elStyleInline&&(element.style.display=elStyleInline.display||"",element.style.height=elStyleInline.height||"",element.style.maxHeight=elStyleInline.maxHeight||""),elementHeight}},{key:"prefixClass",value:function(className){var prefix=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.config.prefix;return prefix?prefix+className:className}},{key:"addClass",value:function(element,className){var prefix=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;element.classList.add(this.prefixClass(className,prefix))}},{key:"removeClass",value:function(element,className){var prefix=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;element.classList.remove(this.prefixClass(className,prefix))}},{key:"toggleClass",value:function(element,className){2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;this.hasClass(element,className)?this.removeClass(element,className):this.addClass(element,className)}},{key:"hasClass",value:function(element,className){var prefix=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;return element.classList.contains(this.prefixClass(className,prefix))}},{key:"addChild",value:function(elementSrc,elementTarget,attributes,position){var elementNode="string"==typeof elementSrc?document.createElement(elementSrc):elementSrc;if(attributes)for(var attr in attributes)elementNode.setAttribute(attr,attributes[attr]);return this.attr(elementNode,attributes),"prepend"===position||"top"===position?elementTarget.prepend(elementNode):("append"===position||"bottom"===position)&&elementTarget.append(elementNode),elementNode}},{key:"attr",value:function(element,props,val){if("undefined"==typeof val&&"object"==_typeof(props))for(var prop in props)element.setAttribute(prop,props[prop]);else"string"==typeof props&&val?element.setAttribute(props,val):this.log("attr()","wrong arguments given. Use attr(element, prop, val) or attr(element, { prop: val, ... }) instead.")}},{key:"css",value:function(element,props,val){if("undefined"==typeof val&&"object"==_typeof(props))for(var prop in props)element.style[prop]=props[prop];else"string"==typeof props&&val?element.style[props]=val:this.log("css()","wrong arguments given. Use css(element, prop, val) or css(element, { prop: val, ... }) instead.")}},{key:"wrap",value:function(element,wrapper){var wrapperElement="string"==typeof wrapper||"undefined"==typeof wrapper?document.createElement(wrapper||"div"):wrapper;return element.parentNode.insertBefore(wrapperElement,element),wrapperElement.appendChild(element),wrapperElement}},{key:"prependTo",value:function(elementSrc,elementTarget,attributes){return this.addChild(elementSrc,elementTarget,attributes||{},"top")}},{key:"appendTo",value:function(elementSrc,elementTarget,attributes){return this.addChild(elementSrc,elementTarget,attributes||{},"bottom")}},{key:"next",value:function(element,selector){var sibling=element.nextElementSibling;if(!selector)return sibling;for(;sibling;){if(sibling.matches(selector))return sibling;sibling=sibling.nextElementSibling}}},{key:"prev",value:function(element,selector){var sibling=element.previousElementSibling;if(!selector)return sibling;for(;sibling;){if(sibling.matches(selector))return sibling;sibling=sibling.previousElementSibling}}},{key:"elements",value:function(selector){return"string"==typeof selector?Array.from(document.querySelectorAll(selector)):"NodeList"==selector.constructor.name?Array.from(selector):[selector]}},{key:"elementsEach",value:function(selector,func){var elements=this.elements(selector);return elements.forEach(func),elements}},{key:"elementsClone",value:function(elementSrc,elementTarget){var _this=this,saveCopy=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return this.elementsEach(elementSrc?elementSrc:this.config.elements,function(el){var elClone=el.cloneNode(!0),elClasslist=Array.from(elClone.classList);saveCopy&&(elClasslist.forEach(function(cssClass){elClone.classList.remove(cssClass),elClone.classList.add(_this.config.prefix+cssClass)}),elClone.id&&(elClone.id=_this.config.prefix+elClone.id)),_this.addClass(el,"source"),_this.addClass(elClone,_this.config.prefix+"target"),elementTarget.append(elClone)})}},{key:"elementsTarget",value:function(){}},{key:"elementsFilter",value:function(){}},{key:"elementBreakpoint",value:function(){}},{key:"on",value:function(selector,eventName,func){eventName?this.elementsEach(selector,function(el){el._events="object"===_typeof(el._events)?el._events:{},el._events[eventName]=Array.isArray(el._events[eventName])?el._events[eventName]:[],el._events[eventName].push(func),el.addEventListener(eventName,func)}):this.error("on()",selector+" - 2nth argument (eventName) is missing.")}},{key:"off",value:function(selector,eventName,func){eventName?this.elementsEach(selector,function(el){func?(el.removeEventListener(eventName,func),el._events[eventName]=el._events[eventName].filter(function(f){return f.toString()!=func.toString()})):(el._events[eventName].forEach(function(fn){return el.removeEventListener(eventName,fn)}),el._events[eventName]=[])}):this.error("off()",selector+" - 2nth argument (eventName) is missing.")}},{key:"log",value:function(title){if(this.config.debug){for(var _console,_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];(_console=console).log.apply(_console,["string"==typeof title&&args.length?this.name+"."+title+":":title].concat(args))}}},{key:"logAll",value:function(){this.config.debug&&(console.groupCollapsed(this.name+" (settings)"),this.log("config",this.config),"undefined"!=typeof this._eventListObject&&this.log("events",this._eventListObject("/"+this.name+"/")),this.log("ui",this.ui),console.groupEnd())}},{key:"error",value:function(title){if(this.config.debug){for(var _console2,_len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];(_console2=console).error.apply(_console2,["string"==typeof title&&args.length?this.name+"."+title+":":title].concat(args))}}}]),IoUtilities}(),Io=function(_IoUtilities){function Io(){var _this2,options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Io),_this2=_possibleConstructorReturn(this,_getPrototypeOf(Io).call(this)),_this2.options=options,_this2.config={},_this2.ui={},_this2.body=document.body,_this2.html=document.documentElement,_this2.name="io",_this2.defaults={prefix:_this2.name+"-",mqlQuery:!1,elements:[],debug:!1},_extends(_this2.config,_this2.defaults,_this2.options),window.io_events||(window.io_events={}),_this2}return _inherits(Io,_IoUtilities),_createClass(Io,[{key:"mqlManager",value:function(path,mql,fn){var mqlQuery=mql?mql:this.config.mqlQuery,mQuery=this._mqlQuery(mqlQuery),mMatch=this._mqlMatch(mQuery);mMatch._fn=fn,mMatch._path=this._eventPath(path),mMatch.addListener(this._mqlHandler),fn.call(this,mMatch),this.sub(path,fn,{_mql:mMatch})}},{key:"mqlManagerRemove",value:function(path){path?(io._eventListValuesData(path).forEach(function(mql){mql.removeListener(mql._fn)}),this.unsub(path)):this.error("mqlManagerRemove","No path argument specified or empty")}},{key:"_mqlMatch",value:function(mqlQuery){return window.matchMedia(mqlQuery)}},{key:"_mqlQuery",value:function(mqlObj){var mqlQuery="";for(var m in mqlObj)mqlObj[m]&&(0!=mqlQuery.length&&(mqlQuery+=" and "),mqlQuery+="("+m.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+": "+mqlObj[m]+")");return mqlQuery}},{key:"_mqlHandler",value:function(mql){mql?this&&this._path?io.pub(this._path,mql):mql._path?io.pub(mql._path,mql):io.log("_mqlHandler()","No _path defined"):io.log("_mqlHandler()","mql argument is undefined")}},{key:"pub",value:function(eventPath){for(var _this3=this,_len3=arguments.length,args=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];setTimeout(function(){var path=_this3._eventPath(eventPath);"undefined"==typeof window.io_events[path]?_this3.log("pub()",path+" does not exist (yet)."):_this3._eventListValuesFunctions(path).forEach(function(fn){"function"==typeof fn?fn.apply(_this3,args):"function"==typeof fn[0]?fn[0].apply(_this3,args):_this3.log("pub()",fn+"is not a function.")})},0)}},{key:"sub",value:function(eventPath,fn,data){var path=this._eventPath(eventPath);"function"==typeof fn?(window.io_events[path]="undefined"==typeof window.io_events[path]?{}:window.io_events[path],!Array.isArray(window.io_events[path]._fn)&&(window.io_events[path]._fn=[]),data&&("object"===_typeof(data)?"object"===_typeof(window.io_events[path]._data)?_extends(window.io_events[path]._data,data):window.io_events[path]._data=data:this.error("sub()",path+" - the data argument has to be of the type object {}")),window.io_events[path]._fn.push(fn)):this.error("sub()",path+" - 2nth argument needs to be a function.")}},{key:"unsub",value:function(eventPath){var fn=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],path=this._eventPath(eventPath);"undefined"==typeof window.io_events[path]?this.log("unsub()",path+" does not exist."):fn&&"undefined"!=typeof window.io_events[path]._fn?window.io_events[path]._fn=window.io_events[path]._fn.filter(function(f){return f.toString()!=fn.toString()}):this._eventListKeys(path).forEach(function(eventP){delete window.io_events[eventP]})}},{key:"_eventListKeys",value:function(eventPath){var result=[];for(var prop in window.io_events)eventPath&&0!==prop.lastIndexOf(eventPath,0)||result.push(prop);return result}},{key:"_eventListObject",value:function(eventPath){if(eventPath){var result={};return this._eventListKeys(eventPath).forEach(function(prop){result[prop]=window.io_events[prop]}),result}return window.io_events}},{key:"_eventListValues",value:function(eventPath,eventProp){var result=[];return this._eventListKeys(eventPath).forEach(function(prop){if(!eventPath||"undefined"!=typeof window.io_events[prop][eventProp])if(Array.isArray(window.io_events[prop][eventProp]))window.io_events[prop][eventProp].forEach(function(fn){return result.push(fn)});else if("object"===_typeof(window.io_events[prop][eventProp]))for(var propObj in window.io_events[prop][eventProp])result.push(window.io_events[prop][eventProp][propObj]);else result.push(window.io_events[prop][eventProp])}),result}},{key:"_eventListValuesFunctions",value:function(eventPath){return this._eventListValues(eventPath,"_fn")}},{key:"_eventListValuesData",value:function(eventPath){return this._eventListValues(eventPath,"_data")}},{key:"_eventPath",value:function(eventPath){return("io"!=this.name&&-1===eventPath.lastIndexOf("/"+this.name+"/",0)?"/"+this.name:"")+("/"==eventPath.charAt(0)?"":"/")+eventPath+("/"==eventPath.charAt(eventPath.length-1)?"":"/")}}]),Io}(IoUtilities),io=new Io,IoAccordion=function(_Io){function IoAccordion(){var _this4,options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,IoAccordion),_this4=_possibleConstructorReturn(this,_getPrototypeOf(IoAccordion).call(this,options)),_this4.name="ioaccordion",_this4.defaults={prefix:_this4.name+"-",accToggle:".ioaccordion-toggle",accContent:".ioaccordion-content",accContainer:!1},_extends(_this4.config,_this4.defaults,_this4.options),_this4.sub("/init/",_this4.init),_this4.sub("/open/",_this4.openAccordion),_this4.sub("/close/",_this4.closeAccordion),_this4.pub("/init/"),_this4}return _inherits(IoAccordion,_Io),_createClass(IoAccordion,[{key:"init",value:function(){var _this5=this;this.ui.accContainer=this.config.accContainer?this.elements(this.config.accContainer):[this.body],this.ui.accContent=[],this.ui.accToggle=[],this.ui.accContainer.forEach(function(accContainer){var accToggle=accContainer.querySelectorAll(_this5.config.accToggle),accContent=accContainer.querySelectorAll(_this5.config.accContent),accContentWrapper=[];_this5.config.debug&&(_this5.ui.accContent.push(accContent),_this5.ui.accToggle.push(accToggle)),accToggle.length!=accContent.length&&_this5.log("init()[WARNING]","Different amounts of Accordion Togglers Vs. Contents.","\naccToggles: ",accToggle,"\naccContents: ",accContent),accContent.forEach(function(el){var accW=_this5.wrap(el);accW.style.maxHeight=0,_this5.addClass(accW,"content-wrapper"),accContentWrapper.push(accW)}),accToggle.forEach(function(el,cnt){var accContentNext=accContent[cnt].parentNode,accContentNextHeight=_this5.heightContent(accContentNext);_this5.on(el,"click",function(){accToggle.forEach(function(accT){el==accT?_this5.pub("/open/",accT):_this5.pub("/close/",accT)}),accContentWrapper.forEach(function(accCW,accIndex){cnt==accIndex?(_this5.toggleClass(accCW,"-active"),accCW.style.maxHeight=0==_this5.height(accCW)?accContentNextHeight+"px":0):(_this5.removeClass(accCW,"-active"),accCW.style.maxHeight=0)})})})}),this.logAll()}},{key:"openAccordion",value:function(element){this.toggleClass(element,"-active")}},{key:"closeAccordion",value:function(element){this.removeClass(element,"-active")}}]),IoAccordion}(Io),IoNav=function(_Io2){function IoNav(){var _this6,options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,IoNav),_this6=_possibleConstructorReturn(this,_getPrototypeOf(IoNav).call(this,options)),_this6.name="ionav",_this6.defaults={prefix:_this6.name+"-",mqlQuery:{minWidth:"0px",maxWidth:"1024px"},elementsNav:[],elementsNavCollapsable:!0,buttonTarget:document.body,buttonElement:"div",theme:"default"},_extends(_this6.config,_this6.defaults,_this6.options),_this6.sub("/init/",_this6.init),_this6.pub("/init/"),_this6}return _inherits(IoNav,_Io2),_createClass(IoNav,[{key:"init",value:function(){var _this7=this;this.ui.btn=this.prependTo("string"==typeof buttonElement?"div":this.config.buttonElement,this.config.buttonTarget),this.ui.overlay=this.prependTo("div",this.body,{class:this.config.prefix+"overlay"}),this.ui.canvas=this.prependTo("div",this.ui.overlay,{class:this.config.prefix+"canvas"}),this.addClass(this.ui.btn,"btn"),this.addClass(this.html,"-closed"),this.sub("/initOverlay/",this.initOverlay),this.sub("/initElementsNav/",this.elementsNav),this.sub("/openOverlay/",this.openOverlay),this.sub("/closeOverlay/",this.closeOverlay),this.sub("/toggleOverlay/",this.toggleOverlay),this.sub("/destroyOverlay/",this.destroyOverlay),this.sub("/destroyAll/",this.destroyAll),this.mqlManager("/mqlMain/",this.config.mqlQuery,function(mql){mql.matches?_this7.addClass(_this7.html,"-active"):(_this7.closeOverlay(),_this7.removeClass(_this7.html,"-active"))}),this.pub("/initOverlay/",this.config.elements),this.pub("/initElementsNav/",this.config.elementsNav),this.on(this.ui.btn,"click",function(){return _this7.pub("/toggleOverlay/")}),this.on(this.ui.overlay,"click",function(e){e.target===e.currentTarget&&_this7.pub("/closeOverlay/")}),this.logAll()}},{key:"destroyAll",value:function(){for(var prop in this.log("destroyAll()","Destroying all events and elements"),this.ui)this.ui[prop].remove();this.ui={},this.unsub(this.name)}},{key:"destroyOverlay",value:function(){this.log("destroyOverlay()","Destroying Overlay and Canvas"),this.unsub("/initOverlay/"),this.ui.canvas.remove(),this.ui.overlay.remove(),delete this.ui.canvas,delete this.ui.overlay}},{key:"initOverlay",value:function(elements){this.log("initOverlay()","Initializing Overlay"),this.elementsClone(elements,this.ui.canvas)}},{key:"toggleOverlay",value:function(){this.log("toggleOverlay()","Toggling Overlay"),this.hasClass(this.html,"-open")?this.pub("/closeOverlay/"):this.pub("/openOverlay/")}},{key:"openOverlay",value:function(){this.log("openOverlay()","Opening Overlay"),this.addClass(this.html,"-open"),this.removeClass(this.html,"-closed")}},{key:"closeOverlay",value:function(){this.log("closeOverlay()","Closing Overlay"),this.removeClass(this.html,"-open"),this.addClass(this.html,"-closed")}},{key:"elementsNav",value:function(selector){var _this8=this;document.querySelectorAll(selector).forEach(function(el){el.querySelectorAll("ul li").forEach(function(li){var link=!1,subnav=!1;li.childNodes.forEach(function(node){"A"==node.tagName&&(link=node),"UL"==node.tagName&&(subnav=node),("A"==node.tagName||"UL"==node.tagName)&&_this8.addClass(node,"-hasSubnav")}),link&&subnav&&(_this8.addClass(li,"-hasSubnav"),_this8.on(link,"click",function(e){e.preventDefault(),_this8.toggleClass(li,"-active"),_this8.toggleClass(link,"-active"),_this8.toggleClass(subnav,"-active")}))})})}}]),IoNav}(Io);
//# sourceMappingURL=../sourcemaps/Libs/io.min.js.map
